<template name="messageList">
	<section class="page-container page-home page-static">
		<header class="fixed-title cd-auto-hide-header">
			<div class="header-container">
				{{> burger}}
				<div class="pagetitle">
					<h2>
						<span class="room-title">{{_ "Message"}}</span>
					</h2>
				</div>
			</div>
		</header>
		
		<div class="container">
			<section class="mod-pagelist card-combine">
				<div data-node="cardList" class="card-list">
					{{#each rooms}}

						<div class="module-message-item">
							<div class="layout-box media-graphic">
								<a href="{{route}}" class="mod-media">
									{{#if subReady}}
										{{> avatar username=(getUsers rid)}}
									{{/if}}
								</a>
								<a href="{{route}}" class="box-col item-list">
									<div class="item-main">{{name}}</div>
									<div class="item-minor">{{txt}}</div>
								</a>
								<span class="plus">
									<span class="time">{{createTime ts}}</span> 
									{{#if alert}}
										<i class="bubble">{{unread}}</i>
									{{/if}}
									</span>
								</div>
						</div>
					{{/each}}
					{{#if hasMore}}
						<li class="load-more">
							{{#if isLoading}}
								<div class="load-more-loading">{{_ "Loading_more_from_history"}}...</div>
							{{else}}
								<button class="waves-effect waves-light ">{{_ "Has_more"}}...</button>
							{{/if}}
						</li>
					{{/if}}
				</div>
			</section>
		</div>
	</section>
</template>